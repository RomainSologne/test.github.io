<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carte 3D avec Leaflet et Deck.gl</title>
    <!-- Inclusion de Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <!-- Inclusion de Deck.gl -->
    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>
    <script src="https://unpkg.com/@deck.gl/leaflet@latest/dist.min.js"></script>
</head>
<body>
    <div id="map" style="width: 100%; height: 100%;"></div>

    <script>
        const map = L.map('map').setView([48.8566, 2.3522], 12);  // CoordonnÃ©es de Paris

        // Ajout d'une couche de fond (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18
        }).addTo(map);

        async function loadGeoJSON() {
            const response = await fetch('http://localhost/data/Paris.geojson');  // Remplacez par l'URL correcte
            const data = await response.json();

            const deckLayer = new deck.GeoJsonLayer({
                id: 'Paris',
                data: data,
                extruded: true,
                getFillColor: [255, 0, 0],
                getElevation: d => 100,
                pickable: true,
                onClick: info => console.log('Object clicked:', info.object)
            });

            const deckOverlay = new deck.LeafletLayer({
                layers: [deckLayer],
                initialViewState: {
                    latitude: 48.8566,
                    longitude: 2.3522,
                    zoom: 12,
                    bearing: 0,
                    pitch: 45
                }
            });

            deckOverlay.addTo(map);
        }

        loadGeoJSON();
    </script>
</body>
</html>
